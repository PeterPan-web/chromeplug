chrome.runtime.getPackageDirectoryEntry(function(info) {
    extensionId = info.filesystem.name.split('_')[1];
});

/*
    插件启动，创建爬虫任务
*/
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.sendMessage(tab.id, JSON.stringify({
        command: 'beginUI'
    }), function(msg) {
        chrome.tabs.executeScript(tab.id, {
            file: 'js/mtBPApp.js',
            allFrames: false
        })
    });
});

chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
    var msg = JSON.parse(message);
    console.log(msg);
});
